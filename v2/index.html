<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Operations Dashboard</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <!-- Header Bar -->
  <header class="header-bar">
    <div class="header-left">
      <div class="app-title" id="dashboardTitle">Operations Dashboard</div>
      <div class="header-sub">
        <span id="localTime">--:--:--</span>
        <span class="dot">•</span>
        Refresh in <span id="refreshCountdown">--</span>s
      </div>
    </div>

    <div class="header-right">
      <button class="btn" id="toggleEditBtn" title="Toggle Edit Mode">Edit Mode</button>
      <button class="btn" id="exportBtn" title="Export configuration JSON">Export</button>
      <button class="btn" id="importBtn" title="Import configuration JSON">Import</button>
      <button class="btn btn-warn" id="resetBtn" title="Reset to default layout">Reset</button>
    </div>
  </header>

  <!-- Dashboard Grid -->
  <main class="dashboard" id="dashboardGrid" aria-label="Dashboard grid">
    <!-- Left column: 3 stacked panels -->
    <section class="panel panel-span-2" data-panel="leftTop">
      <div class="panel-toolbar"><span class="panel-name">Left 1</span><button class="panel-edit btn-mini" data-edit="leftTop">Edit</button></div>
      <div class="panel-body" id="panel-leftTop"></div>
    </section>

    <section class="panel panel-span-2 panel-subpanel" data-panel="leftMiddle">
      <div class="panel-toolbar"><span class="panel-name">Left 2</span><button class="panel-edit btn-mini" data-edit="leftMiddle">Edit</button></div>
      <div class="panel-body" id="panel-leftMiddle"></div>
    </section>

    <section class="panel panel-span-2 panel-subpanel" data-panel="leftBottom">
      <div class="panel-toolbar"><span class="panel-name">Left 3</span><button class="panel-edit btn-mini" data-edit="leftBottom">Edit</button></div>
      <div class="panel-body" id="panel-leftBottom"></div>
    </section>

    <!-- Center Top -->
    <section class="panel" data-panel="centerTop">
      <div class="panel-toolbar"><span class="panel-name">Center Top</span><button class="panel-edit btn-mini" data-edit="centerTop">Edit</button></div>
      <div class="panel-body" id="panel-centerTop"></div>
    </section>

    <!-- Right Top -->
    <section class="panel" data-panel="rightTop">
      <div class="panel-toolbar"><span class="panel-name">Right Top</span><button class="panel-edit btn-mini" data-edit="rightTop">Edit</button></div>
      <div class="panel-body" id="panel-rightTop"></div>
    </section>

    <!-- Center Bottom -->
    <section class="panel" data-panel="centerBottom">
      <div class="panel-toolbar"><span class="panel-name">Center Bottom</span><button class="panel-edit btn-mini" data-edit="centerBottom">Edit</button></div>
      <div class="panel-body" id="panel-centerBottom"></div>
    </section>

    <!-- Right Bottom -->
    <section class="panel" data-panel="rightBottom">
      <div class="panel-toolbar"><span class="panel-name">Right Bottom</span><button class="panel-edit btn-mini" data-edit="rightBottom">Edit</button></div>
      <div class="panel-body" id="panel-rightBottom"></div>
    </section>
  </main>

  <!-- Edit Drawer -->
  <aside class="drawer" id="drawer" aria-hidden="true">
    <div class="drawer-header">
      <div>
        <div class="drawer-title">Customize Dashboard</div>
        <div class="drawer-sub">Saved locally in this browser. Use Export/Import to move between machines.</div>
      </div>
      <button class="btn btn-warn" id="closeDrawerBtn">Close</button>
    </div>

    <div class="drawer-section">
      <h3>Header</h3>
      <label class="field">
        <span>Dashboard Name</span>
        <input type="text" id="nameInput" placeholder="e.g., FSU Weather & Ops Board">
      </label>

      <label class="field">
        <span>Refresh Interval (seconds)</span>
        <input type="number" id="refreshInput" min="30" step="10">
        <div class="hint">Recommended: 300–900 seconds (5–15 min). Refresh pauses while editing.</div>
      </label>
    </div>

    <div class="drawer-section">
      <h3>Column Widths</h3>

      <div class="row3">
        <label class="field">
          <span>Left (%)</span>
          <input type="number" id="col1" min="10" max="80" step="1">
        </label>
        <label class="field">
          <span>Center (%)</span>
          <input type="number" id="col2" min="10" max="80" step="1">
        </label>
        <label class="field">
          <span>Right (%)</span>
          <input type="number" id="col3" min="10" max="80" step="1">
        </label>
      </div>

      <div class="hint">Tip: These should add up to ~100. We’ll auto-normalize if you go over/under.</div>

      <div class="preset-row">
        <button class="btn" data-preset="cameras">Preset: Cameras Focus</button>
        <button class="btn" data-preset="balanced">Preset: Balanced</button>
        <button class="btn" data-preset="weather">Preset: Weather Focus</button>
      </div>
    </div>

    <div class="drawer-section">
      <h3>Panels</h3>
      <div class="hint">
        Paste a full iframe snippet OR a URL. If URL, we wrap it in an iframe.
        <br>Note: Some sites block embedding (NWS briefing pages sometimes do). Twitch requires <code>parent=</code> set to your GitHub Pages domain.
      </div>

      <div class="panel-list" id="panelList"></div>
    </div>

    <div class="drawer-footer">
      <button class="btn" id="saveBtn">Save Changes</button>
      <button class="btn btn-warn" id="discardBtn">Discard</button>
    </div>
  </aside>

  <!-- Modal (Import) -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="modal-card">
      <div class="modal-header">
        <div class="modal-title" id="modalTitle">Import Configuration</div>
        <button class="btn btn-warn" id="modalClose">Close</button>
      </div>
      <div class="modal-body">
        <textarea id="modalTextarea" placeholder="Paste JSON here..."></textarea>
        <div class="hint" id="modalHint"></div>
      </div>
      <div class="modal-footer">
        <button class="btn" id="modalConfirm">Confirm</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>

