<script>
  const FEED_URL =
    "https://api.allorigins.win/raw?url=https://wveis.k12.wv.us/closings/rss.php";

  const COUNTIES = ["Marion", "Harrison", "Monongalia"];

  fetch(FEED_URL)
    .then(res => res.text())
    .then(xmlText => {
      const parser = new DOMParser();
      const xml = parser.parseFromString(xmlText, "application/xml");

      const items = Array.from(xml.querySelectorAll("item"));

      const matches = items.filter(item => {
        const title = item.querySelector("title")?.textContent || "";
        return COUNTIES.some(county =>
          title.toLowerCase().includes(county.toLowerCase())
        );
      });

      if (matches.length === 0) {
        console.log("No closings for target counties.");
        return;
      }

      matches.forEach(item => {
        const title = item.querySelector("title").textContent;
        const description = item.querySelector("description").textContent;

        console.log("MATCH:", title);
        console.log(description);
      });
    })
    .catch(err => {
      console.error("Failed to load WVDE RSS:", err);
    });
</script>
